---
import Base from "../layouts/Base.astro";
import { getCollection } from "astro:content";

const poemPosts = await getCollection("poems");
const blogPosts = await getCollection("posts");
const allPosts = [...poemPosts, ...blogPosts];

const recentPosts = allPosts
    .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
    .slice(0, 5);
---

<Base title="home">
  <div class="max-w-5xl mx-auto">
    <!-- Hero Section -->
    <section class="mb-brutalist-3xl">
      <div class="relative border-brutalist-thick border-brutalist-text p-brutalist-lg md:p-brutalist-2xl">
        <div class="absolute inset-0 border-brutalist-thick border-brutalist-text translate-x-3 translate-y-3 -z-10"></div>

        <h1 class="text-brutalist-4xl md:text-brutalist-6xl font-brutalist-black uppercase leading-none mb-brutalist-md">
          Welcome.
        </h1>
        <p class="text-brutalist-lg md:text-brutalist-xl font-brutalist-normal leading-relaxed max-w-3xl">
          I'm <span class="font-brutalist-bold text-brutalist-orange">Hitarth</span> — a guy from Gujarat, India. I write code, poems, and reflections on things that matter to me. This is my space to share them.
        </p>
      </div>
    </section>

    <!-- Recent Posts Section -->
    <section class="mb-brutalist-3xl">
      <div class="border-l-brutalist-thick border-brutalist-orange pl-brutalist-lg mb-brutalist-lg">
        <h2 class="text-brutalist-2xl md:text-brutalist-3xl font-brutalist-black uppercase">
          Recent Posts
        </h2>
      </div>

      <ul class="space-y-brutalist-md list-none p-0">
        {recentPosts.map((post, index) => (
          <li class={`relative border-brutalist border-brutalist-text p-brutalist-md hover:border-brutalist-orange transition-colors ${index % 2 === 0 ? 'md:ml-8' : 'md:mr-8'}`}>
            <div class="absolute inset-0 border-brutalist border-brutalist-text translate-x-2 translate-y-2 -z-10"></div>
            <a href={`/${post.collection}/${post.slug}`} class="block no-underline group">
              <div class="flex flex-col md:flex-row md:items-baseline md:justify-between gap-2">
                <h3 class="text-brutalist-lg md:text-brutalist-xl font-brutalist-bold group-hover:text-brutalist-orange transition-colors">
                  {post.data.title}
                </h3>
                <span class="font-mono text-brutalist-xs md:text-brutalist-sm text-brutalist-border uppercase tracking-wider whitespace-nowrap">
                  {new Date(post.data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
                </span>
              </div>
            </a>
          </li>
        ))}
      </ul>
    </section>

    <!-- Contact & Links Section -->
    <section class="mb-brutalist-3xl">
      <div class="grid md:grid-cols-2 gap-brutalist-lg">
        <!-- Contact Card -->
        <div class="border-brutalist border-brutalist-text p-brutalist-lg bg-brutalist-surface">
          <h2 class="text-brutalist-xl md:text-brutalist-2xl font-brutalist-black uppercase mb-brutalist-md">
            Get in Touch
          </h2>
          <div class="space-y-brutalist-sm">
            <p class="font-mono text-brutalist-sm md:text-brutalist-base">
              <span class="text-brutalist-border uppercase tracking-wider">Email:</span><br/>
              <a href="mailto:hittarth91@gmail.com" class="text-brutalist-orange underline hover:bg-brutalist-orange hover:text-brutalist-bg hover:no-underline px-1 transition-colors">
                hittarth91@gmail.com
              </a>
            </p>
          </div>
        </div>

        <!-- Social Links Card -->
        <div class="border-brutalist border-brutalist-text p-brutalist-lg bg-brutalist-surface">
          <h2 class="text-brutalist-xl md:text-brutalist-2xl font-brutalist-black uppercase mb-brutalist-md">
            Elsewhere
          </h2>
          <div class="flex flex-col gap-brutalist-xs">
            <a href="https://github.com/gtlsgamr" class="font-brutalist-bold text-brutalist-base uppercase tracking-wide text-brutalist-text hover:text-brutalist-orange hover:bg-brutalist-orange hover:text-brutalist-bg transition-colors px-2 py-1 border-brutalist border-brutalist-text inline-block">
              GitHub →
            </a>
            <a href="https://linkedin.com/in/hitarth-thummar" class="font-brutalist-bold text-brutalist-base uppercase tracking-wide text-brutalist-text hover:text-brutalist-orange hover:bg-brutalist-orange hover:text-brutalist-bg transition-colors px-2 py-1 border-brutalist border-brutalist-text inline-block">
              LinkedIn →
            </a>
            <a href="https://www.instagram.com/hit.ka.arth" class="font-brutalist-bold text-brutalist-base uppercase tracking-wide text-brutalist-text hover:text-brutalist-orange hover:bg-brutalist-orange hover:text-brutalist-bg transition-colors px-2 py-1 border-brutalist border-brutalist-text inline-block">
              Instagram →
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Quote Section -->
    <section>
      <div class="relative border-t-brutalist-thick border-b-brutalist-thick border-brutalist-text py-brutalist-xl px-brutalist-lg bg-brutalist-surface">
        <blockquote class="text-brutalist-xl md:text-brutalist-2xl font-brutalist-medium leading-tight max-w-3xl">
          <span class="text-brutalist-orange font-brutalist-black text-brutalist-4xl">"</span>
          The butterfly counts not months but moments, and has time enough.
          <span class="text-brutalist-orange font-brutalist-black text-brutalist-4xl">"</span>
        </blockquote>
      </div>
    </section>
  </div>
</Base>
